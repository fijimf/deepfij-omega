<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="fragments/template.html::head">
    <meta charset="UTF-8">
    <title>Scrape Jobs</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css'>
    <link href="https://fonts.googleapis.com/css2?family=Loved+by+the+King&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,400;0,900;1,100;1,400;1,900&display=swap" rel="stylesheet">
    <style >
        div {
            border: 0px solid gray;
        }
        .header {
            background-color: #191f7f;
            color:whitesmoke;
            font-weight: bold;
        }
        .sidebutton {
            background-color: #191f7f;
            color:whitesmoke;
            font-weight: bold;
            font-size: 1.1em;
        }
        .clean-label {
            font-weight: 900;
        }
    </style>
</head>
<body>
<div class="d-flex flex-column">
    <div th:replace="fragments/template.html::header"></div>
    <div class="d-flex flex-row">
        <div th:replace="fragments/template.html::sidebar"></div>
        <div id="mainContent" style="font-family: 'Roboto', monospace;">
            <h3 class="p-3">Scrape Job</h3>
            <div class="d-flex flex-row flex-fill px-3">
                <div class="d-flex flex-column flex-fill">
                    <p class="p-0 mb-1">
                        <span class="clean-label">ID: </span>
                        <span th:text="${job.id}"></span>
                    </p>
                    <p class="p-0 mb-1">
                        <span class="clean-label">Season: </span>
                        <span th:text="${job.season}"></span>
                        <a th:text="'Show all '+${job.season}" th:href="'job'+${job.season}"></a>
                    </p>
                    <p class="p-0 mb-1"><span class="clean-label">Job type: </span><span th:text="${job.getUpdateOrFill()}"></span></p>
                    <p class="p-0 mb-1"><span class="clean-label">Duration: </span><span th:text="${job.durationString}"></span></p>
                </div>
                <div class="d-flex flex-column flex-fill">
                    <p class="p-0 mb-1">
                        <span class="clean-label">Number of requests: </span>
                        <span th:text="${job.getNumRequests()}"></span>
                    </p>
                    <p class="p-0 mb-1">
                        <span class="clean-label">Errors: </span>
                        <span th:text="${job.getErrorCount()}"></span>
                    </p>
                    <p class="p-0 mb-1">
                        <span class="clean-label">Number of games: </span>
                        <span th:text="${job.getGamesScraped()}"></span>
                    </p>
                    <p class="p-0 mb-1">
                        <span class="clean-label">Number of changes: </span>
                        <span th:text="${job.getChangesAccepted()}"></span>
                    </p>
                </div>
            </div>
            <div class="p-2">
                <table class="table table-sm">
                    <thead>
                    <tr>
                        <th class="text-center">Req #</th>
                        <th class="text-center">Key</th>
                        <th class="text-center">Time</th>
                        <th class="text-center">Status</th>
                        <th class="text-center">MD5</th>
                        <th class="text-center">Games</th>
                        <th class="text-center">Changes</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="scrapeReq: ${job.scrapeRequests}">
                        <td class="text-right" th:text="${scrapeReq.getId()}"></td>
                        <td class="text-right" th:text="${scrapeReq.getModelKey()}"></td>
                        <td th:text="${scrapeReq.getRequestedAtString()}"></td>
                        <td class="text-right" th:text="${scrapeReq.getStatusCode()}"></td>
                        <td th:text="${scrapeReq.getDigest()}"></td>
                        <td class="text-right" th:text="${scrapeReq.getUpdatesProposed()}"></td>
                        <td class="text-right" th:text="${scrapeReq.getUpdatesAccepted()}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div th:replace="fragments/template.html :: footer"></div>
</div>

</body>
</html>
